---
- include_vars: "{{ ansible_os_family|lower }}.yml"

- name: Upgrade Repository Cache
  apt:
    update_cache: yes
    force_apt_get: yes
    cache_valid_time: 3600

- name: Upgrade System Packages
  apt:
    upgrade: dist
    force_apt_get: yes

- name: Install NTP
  package:
    state: present
    name: "{{ item }}"
  with_items: "{{ ntp_packages }}"

- name: Enable and start NTP
  service:
    name: "{{ ntp_service_name }}"
    state: started
    enabled: yes
  when: ntp_service_name is defined
